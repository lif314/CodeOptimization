# CodeOptimization
编译原理 -- 代码优化

```C++
读入文件完毕
四元式集合读入测试：
0: := 3.14 # T0
1: * 2 T0 T1
2: + R r T2
3: * T1 T2 A
4: := A # B
5: * 2 T0 T3
6: + R r T4
7: * T3 T4 T5
8: - R r T6
9: * T5 T6 B
10: := 1 # I
11: j> I 10 25
12: * 2 J T1
13: * 10 I T2
14: + T2 T1 T3
15: - A 11 T4
16: * 2 J T5
17: * 10 I T6
18: + T6 T5 T7
19: - A 11 T8
20: =[] T8 T7 T9
21: + T9 1 X1
22: []= X1 T4 T3
23: + I 1 I
24: j # # 11
25: halt # # #

基本块划分测试：
0: 0 1 2 3 4 5 6 7 8 9 10
1: 11
2: 12 13 14 15 16 17 18 19 20 21 22 23 24
3: 25

四元式集合的待用信息和活跃信息表：
0: (1,1) (-1,0) (4,1)
1: (3,1) (-1,0) (5,1)
2: (3,1) (6,1) (6,1)
3: (4,1) (-1,0) (-1,0)
4: (-1,0) (15,1) (10,1)
5: (7,1) (-1,0) (-1,0)
6: (7,1) (8,1) (8,1)
7: (9,1) (-1,0) (-1,0)
8: (9,1) (-1,0) (-1,0)
9: (-1,0) (-1,0) (-1,0)
10: (11,1) (-1,0) (24,1)
11: (-1,0) (13,1) (-1,0)
12: (14,1) (-1,0) (16,1)
13: (14,1) (-1,0) (17,1)
14: (-1,0) (-1,0) (-1,0)
15: (22,1) (19,1) (-1,0)
16: (18,1) (-1,0) (-1,0)
17: (18,1) (-1,0) (23,1)
18: (20,1) (-1,0) (-1,0)
19: (20,1) (-1,0) (-1,0)
20: (21,1) (-1,0) (-1,0)
21: (22,1) (-1,0) (-1,0)
22: (-1,0) (-1,0) (-1,0)
23: (-1,0) (-1,0) (-1,0)
24: (-1,0) (25,1) (24,1)
25: (-1,0) (-1,0) (25,1)

DAG局部优化测试：
block 0:
  := 3.14 # T0
  := 6.28 # T1
  := 6.28 # T3
  + R r T2
  := T2 # T4
  * 6.28 T2 A
  := A # T5
  - R r T6
  * A T6 B
  := 1 # I
block 1:
  j> I 10 25
block 2:
  * 2 J T1
  := T1 # T5
  * 10 I T2
  := T2 # T6
  + T2 T1 T7
  - A 11 T4
  := T4 # T8
  =[] T4 T7 T9
  + T9 1 X1
  []= X1 T4 T3
  + I 1 I
  j # # 11
block 3:
  halt # # #
测试: 25 3 1
测试: 11 1 2

循环不变运算测试：
2: 12 15 16 19


代码外提运算测试：
0: 0 1 2 3 4 5 6 7 8 9 10
2: 11
3: 12 13 14 15 16 17 18 19 20 21 22 23 24
4: 25
1: 12 15 16 19

强度削弱测试
0: := 3.14 # T0
1: * 2 T0 T1
2: + R r T2
3: * T1 T2 A
4: := A # B
5: * 2 T0 T3
6: + R r T4
7: * T3 T4 T5
8: - R r T6
9: * T5 T6 B
10: := 1 # I
11: j> I 10 25
12: * 2 J T1
13: * 10 I T2
14: + T2 T1 T3
15: - A 11 T4
16: * 2 J T5
17: * 10 I T6
18: + T6 T5 T7
19: - A 11 T8
20: =[] T8 T7 T9
21: + T9 1 X1
22: []= X1 T4 T3
23: + I 1 I
24: j # # 11
25: halt # # #
26: + T2 10 T2
27: + T6 10 T6
28: + T3 10 T3
29: + T7 10 T7
--------
基本块号：0
四元式集合：
0 1 2 3 4 5 6 7 8 9 10 13 17 14 18
是否是循环：0
循环不变量信息：

基本块号：1
四元式集合：
11
是否是循环：0
循环不变量信息：

基本块号：2
四元式集合：
12 15 16 19 20 21 22 23 26 27 28 29 24
是否是循环：1
循环不变量信息：
12 15 16 19
基本块号：3
四元式集合：
25
是否是循环：0
循环不变量信息：

```



